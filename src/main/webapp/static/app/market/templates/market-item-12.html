<section class="market-item">
    <header>
        <div class="media">
            <a class="pull-left item-logo">
                <img ng-if="imgtitle !== undefined" class="logo" ng-src="" holder-js="holder.js/160x160?theme={{imgtheme}}&text={{imgtitle}}"  alt="{{'MARKET.THUMBNAIL' | translate}}"/>
                <img ng-if="image" ng-src="{{image}}" class="thumbnail image" alt="{{'MARKET.THUMBNAIL' | translate}}"/>
            </a>
            <div class="media-body">
                <h1>{{title}}</h1>

                <div ng-hide="browse">

                    <div><span translate="MARKET.PRODUCER"></span> :
                        <ul class="list-unstyled">
                            <li ng-repeat="contributor in content.contributors" ng-if="isProducer(contributor)">
                                <a ng-href='#/producers/{{contributor.entity.id}}' ng-bind="contributor.entity.fullname"></a>
                            </li>
                        </ul>
                    </div>
                    <div ng-if="content.website"><span translate="MARKET.WEBSITE"></span> :
                        <ul class="list-unstyled">
                            <li><a ng-href="{{content.website}}" ng-bind="content.website" target="_BLANK"></a></li>
                        </ul>
                    </div>
                    <div ng-if="tags.length > 1"><span translate="MARKET.ALL_VERSIONS"></span> :
                        <ul class="list-inline all-versions">
                            <li ng-repeat="t in tags">
                                <div class="label tag" ng-class="tag.name === t.name ? 'label-primary' : 'label-default'">
                                    <span ng-class="icons.tag"></span>
                                    <a ng-if="tag.name !== t.name" ng-href="#/market/corpora/{{alias}}/{{t.name}}" translate="BROWSER.VERSION" data-translate-values="{number: t.name}"></a>
                                    <span ng-if="tag.name === t.name" translate="BROWSER.VERSION" data-translate-values="{number: t.name}"></span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <button class="btn btn-default" ng-show="browse" ng-click="browseContent()" translate="MARKET.GO_BACK_INFO"></button>
            </div>
        </div>
    </header>

    <div class="row">

        <div ng-if="browse" class="col-md-12">
            <div browser></div>
        </div>

        <div ng-show="!browse" class="col-md-8">
            <section id="description">
                <header><span class="octicon octicon-book fa-fw" style="font-size: 26px"></span> {{'DESCRIPTION' | translate}}</header>
                <article data-target-blank data-content="description">
                    <p ng-bind-html="description"></p>
                </article>
            </section>

            <section id="contributor" ng-if="content.contributors">
                <header><span class="fa fa-user fa-fw"></span> {{'MARKET.CONTRIBUTOR' | translate}}</header>

                <div class="contributor-entity" ng-repeat="contributor in content.contributors" ng-if="!isProducer(contributor)">
                    <div ng-if="contributor.entity.emailhash" class="logo-contributor">
                        <span avatar data-email-hash="contributor.entity.emailhash" data-size="90" data-img-classes="user-avatar img-responsive"></span>
                    </div>
                    <div ng-if="!contributor.entity.emailhash" class="logo-contributor thumbnail">
                        <img ng-if="contributor.entity.img" class="logo-contributor" ng-src="{{contributor.entity.img}}"/>
                        <span ng-if="!contributor.entity.img" class="fa fa-user fa-5x"></span>
                    </div>
                    <div class="contributor-entity-fullname">
                        <strong ng-if="!contributor.entity.id" ng-bind="contributor.entity.fullname"></strong>
                        <!-- <a ng-if="contributor.entity.username" ng-bind="contributor.entity.fullname" ng-href='#/contributors/{{contributor.entity.id}}'></a> -->
                        <a ng-if="contributor.entity.id" ng-bind="contributor.entity.fullname" ng-href='#/contributors/{{contributor.entity.id}}'></a>
                    </div>
                    <div class="contributor-roles">
                        <span ng-repeat="role in contributor.role"><i>{{'ROLES.'+role | uppercase | translate}}</i><span ng-if="!$last">, </span></span>
                    </div>
                </div>

            </section>

            <section id="keywords" ng-if="keywords || content.corporaLanguages || content.annotationLevels || content.corporaFormats || content.corporaFileEncodings || content.programmingLanguages || content.opearatingSystems || content.toolLanguages">
                <header><span class="fa fa-info fa-fw"></span> {{'MARKET.ADDITIONAL_INFORMATION' | translate}}</header>
                <article>
                    <div class="row">

                        <div ng-if="keywords" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.KEYWORDS"></dt>
                                <dd ng-repeat="keyword in keywords">
                                    {{keyword}}
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="content.corporaLanguages" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.FACET.CORPORA_LANG"></dt>
                                <dd ng-repeat="pLang in content.corporaLanguages">
                                    {{pLang}}
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="content.annotationLevels" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.FACET.ANNOTATION_LEVEL"></dt>
                                <dd ng-repeat="annLevel in content.annotationLevels">
                                    {{annLevel}}
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="content.corporaFormats" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.FACET.TEXT_FORMAT"></dt>
                                <dd ng-repeat="corpFormat in content.corporaFormats">
                                    {{corpFormat}}
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="content.corporaFileEncodings" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.FACET.CORPORA_FILE_ENCODINGS"></dt>
                                <dd ng-repeat="corpFileEnc in content.corporaFileEncodings">
                                    {{corpFileEnc}}
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="content.programmingLanguages" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.PROGRAMMING_LANGUAGE"></dt>
                                <dd ng-repeat="pl in content.programmingLanguages">
                                    {{pl}}
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="content.opearatingSystems" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.OPERATING_SYSTEM"></dt>
                                <dd ng-repeat="os in content.opearatingSystems">
                                    <a ng-href="">{{os}}</a>
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="content.toolLanguages" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.LANGUAGE"></dt>
                                <dd ng-repeat="lang in content.toolLanguages">
                                    {{lang}}
                                </dd>
                            </dl>
                        </div>

                    </div>
                </article>
            </section>

            <section id="publications" ng-if="content.publications">
                <header><span class="fa fa-book fa-fw"></span> {{'MARKET.PUBLICATIONS' | translate}}</header>
                <div class="section-body-wrapper">
                    <!-- <strong translate="MARKET.PRIMARY_PUBLICATIONS" ng-if="primaryPublications.length>0"></strong> -->
                    <!-- <ul class="list-unstyled">
                        <li ng-repeat="pub in primaryPublications" ng-bind-html="pub"></li>
                    </ul> -->
                    <!-- <p ng-repeat="pub in primaryPublications" ng-bind-html="pub"></p> -->
                    <dl>
                        <dt translate="MARKET.PRIMARY_PUBLICATIONS"></dt>
                        <dd ng-repeat="pub in primaryPublications" ng-bind-html="pub">
                        </dd>
                    </dl>
                    <!-- <strong translate="MARKET.SECONDARY_PUBLICATIONS" ng-if="secondaryPublications.length>0"></strong>
                    <ul class="list-unstyled">
                        <li ng-repeat="pub in secondaryPublications" ng-bind-html="pub"></li>
                    </ul> -->
                    <dl>
                        <dt translate="MARKET.SECONDARY_PUBLICATIONS"></dt>
                        <dd ng-repeat="pub in secondaryPublications" ng-bind-html="pub">
                        </dd>
                    </dl>
                </div>
            </section>
        </div>

        <aside ng-show="!browse" class="col-md-4">

            <div class="panel panel-default license-panel" ng-show="content.type !== 'Application'">
                <div class="panel-heading"><span class="fa fa-download fa-fw"></span> {{'MARKET.DOWNLOAD' | translate}}</div>
                <div class="panel-body">

                    <p ng-show="content.conditionsOfUse" ng-bind-html="content.conditionsOfUse"></p>
                    <p data-visualizer ng-show="licenseDataObject"><a id="preview-license" ng-click="showPreview(licenseDataObject.key)" translate="MARKET.LICENCE_DETAIL"></a></p>
                    <div class="btn-group btn-group-justified" role="group" ng-show="datasizeToPrint">
                        <div class="btn-group" role="group">
                            <button class="btn btn-success" data-ng-disabled="root === 'head'" ng-click="exportItem()" translate="DOWNLOAD" data-title="{{'MARKET.DOWNLOAD_ALL' | translate:datasizeToPrint}}" data-placement="bottom" bs-tooltip></button>
                        </div>
                        <div class="btn-group" role="group">
                            <button class="btn btn-default" data-ng-disabled="root === 'head'" ng-click="browseContent()" translate="MARKET.BROWSE"></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-default" ng-show="content.type === 'Application'">
                <div class="panel-heading"><span class="fa fa-link fa-fw"></span> {{'MARKET.LINK' | translate}}</div>
                <div class="panel-body">

                    <div class="btn-group btn-group-justified">
                        <a ng-href="{{content.applicationUrl}}" target="_BLANK" class="btn btn-block btn-success" translate="MARKET.SITE"></a>
                    </div>
                </div>
            </div>

            <div class="panel panel-default derogation-panel" ng-show="content.derogation">
                <div class="panel-heading" translate="MARKET.DEROGATION"></div>
                <div class="panel-body">

                    <p>
                        <a href="http://www.archivesdefrance.culture.gouv.fr/seda/api/seda_v1-0_accessrestriction_code_xsd_Simple_Type_AccessRestrictionCodeType.htm#AccessRestrictionCodeType" target="_BLANK">{{content.derogation}}</a>
                        <span ng-if="content.derogation==='AR038'"> - Documents librement communicables. (Code du Patrimoine, art. L. 211-1, L. 211-4, L. 213-1)</span>
                        <span ng-if="content.derogation==='AR048'"> - Documents dont la communication porte atteinte à la protection de la vie privée ou portant appréciation ou jugement de valeur sur une personne physique nommément désignée, ou facilement identifiable, ou qui font apparaître le comportement d'une personne dans des conditions susceptibles de lui porter préjudice. (Code du Patrimoine, art. L. 213-2, I, 3)</span>
                        <span ng-if="content.derogation==='AR042'"> - Documents élaborés dans le cadre d'un contrat de prestation de services exécuté pour le compte d'une ou de plusieurs personnes déterminées. (Code du Patrimoine, art. L. 213-2, I, 1, b)</span>
                    </p>

                </div>
            </div>

            <div class="panel panel-default" ng-show="bibliographicCitation">
                <div class="panel-heading" translate="MARKET.BIBLIOGRAPHIC_CITATION"></div>
                <div data-target-blank data-content="bibliographicCitation" class="panel-body">

                    <p ng-bind-html="bibliographicCitation"></p>
                </div>
            </div>

            <div data-preview-box key="itemKey" preview="content.preview" ng-if="content.preview"></div>
            <!-- <div class="btn-group btn-group-justified">
                <div class="btn-group">
                    <button class="btn btn-default">
                        <span class="fa fa-heart"></span> {{'MARKET.ADD_TO_FAVOURITES' | translate}}
                    </button>
                </div>
                <div class="btn-group">
                    <button class="btn btn-default">
                        <span class="octicon octicon-repo-push"></span> {{'MARKET.USE_IN_MY_PROJECT' | translate}}
                    </button>
                </div>
            </div>
            <br/> -->
        </aside>

    </div>
</section>
