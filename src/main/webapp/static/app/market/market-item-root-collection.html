<section class="market-item">
    <header>
        <div class="media">
            <a class="pull-left">
                <img ng-if="imgtitle !== undefined" class="logo" holder-js="holder.js/160x160/{{imgtheme}}/text:{{imgtitle}}"/>
                <img ng-if="item.image" ng-src="{{item.image}}" class="thumbnail image"/>
            </a>
            <div class="media-body">
                <h1>{{item['http://purl.org/dc/elements/1.1/title']}}</h1>

                <div ng-hide="browse">
                    <p>{{'MARKET.PRODUCER' | translate}} : <span ng-repeat="producer in item['http://www.ortolang.fr/ontology/producer']"><a ng-href='#/search?content="{{producer}}"' ng-bind="producer" class="lab"></a><span ng-if="!$last">, </span></span></p>
                    <p ng-if="item['http://www.ortolang.fr/ontology/website']">{{'MARKET.WEBSITE' | translate}} : <a href="{{item['http://www.ortolang.fr/ontology/website']}}" ng-bind="item['http://www.ortolang.fr/ontology/website']" target="_BLANK"></a></p>
                </div>
                <button class="btn btn-default" ng-show="browse" ng-click="browse = !browse">{{'MARKET.GOBACKINFO' | translate}}</button>
            </div>
        </div>
    </header>

    <div class="row">

        <div ng-show="!browse" class="col-md-8">
            <section id="description">
                <header><span class="octicon octicon-book fa-fw" style="font-size: 26px"></span> {{'DESCRIPTION' | translate}}</header>
                <article>
                    <p ng-bind-html="item['http://purl.org/dc/elements/1.1/description']"></p>
                </article>
            </section>

            <section id="preview" ng-if="previewCollection">
                <header><span class="glyphicon glyphicon-eye-open fa-fw" style="font-size: 20px;"></span> {{'MARKET.PREVIEW' | translate}}</header>
                <article>
                    <div class="browsed-element-children-wrapper">
                        <div class="row browsed-element-children">
                            <div ng-repeat="element in previewCollection.object.elements"  class="browsed-element-child-wrapper">
                                <div class="browsed-element-child"
                                    ng-click="showPreview(element.key)">
                                    <div class="preview">
                                        <span class="fa-4x" ng-class="element.mimeType | mimeTypeIconCss"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </article>
            </section>

            <section id="keywords" ng-if="item['http://purl.org/dc/terms/extent'] || item['http://purl.org/dc/terms/keywords'] || item['http://www.ortolang.fr/ontology/primaryLanguage'] || item['http://www.ortolang.fr/ontology/discourseType'] || item['http://www.ortolang.fr/ontology/linguisticSubject'] || item['http://www.ortolang.fr/ontology/programmingLanguage'] || item['http://www.ortolang.fr/ontology/opearatingSystem'] || item['http://www.ortolang.fr/ontology/toolSupport'] || item['http://www.ortolang.fr/ontology/language']">
                <header><span class="fa fa-info fa-fw"></span> {{'MARKET.ADDITIONAL_INFORMATION' | translate}}</header>
                <article>
                    <div class="row">
                        <div ng-if="item['http://purl.org/dc/terms/extent']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.EXTENT"></dt>
                                <dd ng-bind-html="item['http://purl.org/dc/terms/extent']"></dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/keywords']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.KEYWORDS"></dt>
                                <dd ng-repeat="keyword in item['http://www.ortolang.fr/ontology/keywords']">
                                    <a ng-href='#/search?content="{{keyword}}"'>{{keyword}}</a>
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/primaryLanguage']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.PRIMARY_LANGUAGE"></dt>
                                <dd ng-repeat="pLang in item['http://www.ortolang.fr/ontology/primaryLanguage']">
                                    <a ng-href='#/search?content="{{pLang}}"'>{{pLang}}</a>
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/discourseType']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.DISCOURSE_TYPE"></dt>
                                <dd ng-repeat="discType in item['http://www.ortolang.fr/ontology/discourseType']">
                                    <a ng-href='#/search?content="{{discType}}"'>{{discType}}</a>
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/linguisticSubject']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.LINGUISTIC_SUBJECT"></dt>
                                <dd ng-repeat="lingSubj in item['http://www.ortolang.fr/ontology/linguisticSubject']">
                                    <a ng-href='#/search?content="{{lingSubj}}"'>{{lingSubj}}</a>
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/programmingLanguage']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.PROGRAMMING_LANGUAGE"></dt>
                                <dd ng-repeat="progLang in item['http://www.ortolang.fr/ontology/programmingLanguage']">
                                    <a ng-href='#/search?content="{{progLang}}"'>{{progLang}}</a>
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/opearatingSystem']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.OPERATING_SYSTEM"></dt>
                                <dd ng-repeat="opsys in item['http://www.ortolang.fr/ontology/opearatingSystem']">
                                    <a ng-href='#/search?content="{{opsys}}"'>{{opsys}}</a>
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/toolSupport']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.SUPPORT_TOOL"></dt>
                                <dd ng-bind-html="item['http://www.ortolang.fr/ontology/toolSupport']"></dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/language']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.LANGUAGE"></dt>
                                <dd ng-repeat="lang in item['http://www.ortolang.fr/ontology/language']">
                                    <a ng-href='#/search?content="{{lang}}"'>{{lang}}</a>
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/programmingLanguage']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.PROGRAMMING_LANGUAGE"></dt>
                                <dd ng-repeat="progLang in item['http://www.ortolang.fr/ontology/programmingLanguage']">
                                    <a ng-href='#/search?content="{{progLang}}"'>{{progLang}}</a>
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/opearatingSystem']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.OPERATING_SYSTEM"></dt>
                                <dd ng-repeat="opsys in item['http://www.ortolang.fr/ontology/opearatingSystem']">
                                    <a ng-href='#/search?content="{{opsys}}"'>{{opsys}}</a>
                                </dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/toolSupport']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.SUPPORT_TOOL"></dt>
                                <dd ng-bind-html="item['http://www.ortolang.fr/ontology/toolSupport']"></dd>
                            </dl>
                        </div>

                        <div ng-if="item['http://www.ortolang.fr/ontology/language']" class="col-md-3">
                            <dl>
                                <dt translate="MARKET.LANGUAGE"></dt>
                                <dd ng-repeat="lang in item['http://www.ortolang.fr/ontology/language']">
                                    <a ng-href='#/search?content="{{lang}}"'>{{lang}}</a>
                                </dd>
                            </dl>
                        </div>
                    </div>
                </article>
            </section>

            <section id="contributor" ng-if="item['http://www.ortolang.fr/ontology/researcher'] || item['http://www.ortolang.fr/ontology/manager'] || item['http://www.ortolang.fr/ontology/developer'] || item['http://www.ortolang.fr/ontology/author'] || item['http://www.ortolang.fr/ontology/compiler']">
                <header><span class="fa fa-user fa-fw"></span> {{'MARKET.CONTRIBUTOR' | translate}}</header>

                <article class="row" ng-if="item['http://www.ortolang.fr/ontology/researcher']">
                    <h4 translate="MARKET.RESEARCHER"></h4>
                    <ul class="list-contributor">
                        <li ng-repeat="researcher in item['http://www.ortolang.fr/ontology/researcher']">
                            <a ng-href='#/search?content="{{researcher}}"' ng-bind="researcher"></a>
                        </li>
                    </ul>

                </article>
                <article class="row" ng-if="item['http://www.ortolang.fr/ontology/manager']">
                    <h4 translate="MARKET.MANAGER"></h4>
                    <ul class="list-contributor">
                        <li ng-repeat="manager in item['http://www.ortolang.fr/ontology/manager']">
                            <a ng-href='#/search?content="{{manager}}"' ng-bind="manager"></a>
                        </li>
                    </ul>
                </article>
                <article class="row" ng-if="item['http://www.ortolang.fr/ontology/developer']">
                    <h4 translate="MARKET.DEVELOPER"></h4>
                    <ul class="list-contributor">
                        <li ng-repeat="developer in item['http://www.ortolang.fr/ontology/developer']">
                            <a ng-href='#/search?content="{{developer}}"' ng-bind="developer"></a>
                        </li>
                    </ul>
                </article>
                <article class="row" ng-if="item['http://www.ortolang.fr/ontology/author']">
                    <h4 translate="MARKET.AUTHOR"></h4>
                    <ul class="list-contributor">
                        <li ng-repeat="author in item['http://www.ortolang.fr/ontology/author']">
                            <a ng-href='#/search?content="{{author}}"' ng-bind="author"></a>
                        </li>
                    </ul>
                </article>
                <article class="row" ng-if="item['http://www.ortolang.fr/ontology/compiler']">
                    <h4 translate="MARKET.COMPILER"></h4>
                    <ul class="list-contributor">
                        <li ng-repeat="compiler in item['http://www.ortolang.fr/ontology/compiler']">
                            <a ng-href='#/search?content="{{compiler}}"' ng-bind="compiler"></a>
                        </li>
                    </ul>
                </article>
            </section>

        </div>

        <div ng-if="browse" class="col-md-12">
            <div browser></div>
        </div>

        <div ng-if="!browse" ng-include="'common/visualizers/visualizer-template.html'"></div>

        <aside ng-show="!browse" class="col-md-4">

            <div class="panel panel-default license-panel" ng-show="datasizeToPrint || item['http://www.ortolang.fr/ontology/conditionsOfUse'] || licenceDataObject">
                <div class="panel-heading"><span class="fa fa-download fa-fw"></span> {{'MARKET.DOWNLOAD' | translate}}</div>
                <div class="panel-body">

                    <p ng-show="item['http://www.ortolang.fr/ontology/conditionsOfUse']" ng-bind="item['http://www.ortolang.fr/ontology/conditionsOfUse']"></p>
                    <p ng-show="licenceDataObject"><a id="preview-license" ng-click="showPreview(licenceDataObject.key)" translate="MARKET.LICENCE_DETAIL"></a></p>
                    <div class="btn-group btn-group-justified" ng-show="datasizeToPrint">

                        <a ng-href="{{downloadUrl}}" class="btn btn-block btn-success" translate="DOWNLOAD" data-title="{{'MARKET.DOWNLOAD_ALL' | translate:datasizeToPrint}}" data-placement="bottom" bs-tooltip></a>

                        <div class="btn-group">
                            <button class="btn btn-default btn-block" ng-click="browse = !browse">{{'MARKET.BROWSE' | translate}}</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-default derogation-panel" ng-show="item['http://www.ortolang.fr/ontology/derogation']">
                <div class="panel-heading" translate="MARKET.DEROGATION"></div>
                <div class="panel-body">

                    <p>
                        {{item['http://www.ortolang.fr/ontology/derogation']}}<span ng-if="item['http://www.ortolang.fr/ontology/derogation']==='AR038'"> - Documents librement communicables. (Code du Patrimoine, art. L. 211-1, L. 211-4, L. 213-1)</span>
                    </p>

                </div>
            </div>

            <!-- <div class="btn-group btn-group-justified">
                <div class="btn-group">
                    <button class="btn btn-default">
                        <span class="fa fa-heart"></span> {{'MARKET.ADD_TO_FAVOURITES' | translate}}
                    </button>
                </div>
                <div class="btn-group">
                    <button class="btn btn-default">
                        <span class="octicon octicon-repo-push"></span> {{'MARKET.USE_IN_MY_PROJECT' | translate}}
                    </button>
                </div>
            </div>
            <br/> -->

            <div ng-if="item['http://purl.org/dc/terms/spacial'] || item['http://purl.org/dc/terms/temporal']" class="panel panel-default metadata-panel">
                <div class="panel-heading" translate="MARKET.LOCATION"></div>
                <div class="panel-body">
                    <dl class="dl-horizontal">
                        <dt ng-if="item['http://purl.org/dc/terms/spacial']" translate="MARKET.SPACIAL"></dt>
                        <dd ng-repeat="spacial in item['http://purl.org/dc/terms/spacial']">{{spacial}}<span ng-if="!$last">, </span></dd>
                        <dt ng-if="item['http://purl.org/dc/terms/temporal']" translate="MARKET.TEMPORAL"></dt>
                        <dd ng-if="item['http://purl.org/dc/terms/temporal']">{{item['http://purl.org/dc/terms/temporal']}}</dd>
                    </dl>
                </div>
            </div>
        </aside>
    </div>
</section>
