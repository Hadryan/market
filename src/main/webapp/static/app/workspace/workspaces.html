<div ng-if="browserCtrlInitialized" ng-show="browsing" browser></div>
<div ng-hide="browsing" class="workspaces">
    <div class="container-fluid">
        <div class="row toolbar browser-toolbar"></div>
        <div class="row">
            <div class="col-sm-2 col-md-2 browser-aside browser-aside-left">
                <div class="btn-group dropdown-wrapper add-action">
                    <button type="button" class="btn btn-workspace dropdown-toggle" data-toggle="dropdown" translate="BROWSER.NEW"></button>
                    <ul class="dropdown-menu" role="menu">
                        <li><div ng-click="createWorkspace()"><span ng-class="icons.browser.workspace"></span> {{'BROWSER.WORKSPACE' | translate}}</div></li>
                    </ul>
                </div>
                <section class="my-workspaces">
                    <ul class="list-unstyled">
                        <li class="my-workspaces-item" ng-repeat="workspace in workspaceList.entries track by workspace.key"
                            ng-click="changeWorkspace(workspace)"
                            ng-class="{active: isActiveWorkspace(workspace)}"><span></span>{{workspace.name}}</li>
                    </ul>
                </section>
            </div>
            <div class="col-sm-10 col-md-10 container-main workspace-dashboard">
                <h1>{{WorkspaceBrowserService.workspace.name}}</h1>
                <br/>
                <div>
                    <button class="btn btn-default" ng-click="toggleBrowsing()"><span ng-class="icons.browser.browse"></span> {{'MARKET.BROWSE' | translate}}</button>
                    <div class="btn-group">
                        <button class="btn btn-default" ng-click="showMetadataItem()"><span class="octicon octicon-book"></span> {{'BROWSER.CREATE_PRESENTATION_METADATA' | translate}}</button>
                        <button class="btn btn-default" data-ng-disabled="!WorkspaceBrowserService.workspace.changed" ng-click="snapshot()"><span ng-class="icons.browser.snapshot"></span> {{'WORKSPACE.SNAPSHOT' | translate}}</button>
                        <button class="btn btn-default" ng-click="publish()"><span ng-class="icons.browser.publish"></span> {{'WORKSPACE.PUBLISH' | translate}}</button>
                    </div>
                </div>
                <hr/>
                <div bs-tabs data-nav-class="nav-pills">
                    <section data-title="{{'BROWSER.INFORMATION' | translate}}" bs-pane>
                        <br/>
                        <dl>
                            <dt translate="WORKSPACE.ALIAS"></dt>
                            <dd>{{WorkspaceBrowserService.workspace.alias}}</dd>
                            <dt translate="BROWSER.KEY"></dt>
                            <dd>{{WorkspaceBrowserService.workspace.key.substring(0,6)}} <span class="copy-key" data-title="{{'BROWSER.COPY_TO_CLIPBOARD' | translate}}" data-placement="top" bs-tooltip><span class="octicon octicon-clippy" ui-zeroclip zeroclip-model="WorkspaceBrowserService.workspace.key"></span></span></dd>
                        </dl>
                    </section>
                    <section data-title="{{'WORKSPACE.MEMBERS' | translate}}" bs-pane>
                        <br/>
                        <ul class="list-unstyled">
                            <li ng-repeat="member in workspaceMembers.members track by member.key" class="media">
                                <div class="media-left">
                                    <img ng-src="http://www.gravatar.com/avatar/{{member.emailHash}}?d=retro&s=50" class="img-circle" />
                                </div>
                                <div class="media-body">
                                    <span>{{member.givenName}} {{member.familyName}}</span>
                                    <br/>
                                    <span class="small">{{member.email}}</span>
                                </div>
                            </li>
                        </ul>
                        <button class="btn btn-default" ng-click="addMember()"><span ng-class="icons.browser.plus"></span> Add member</button>
                    </section>
                </div>
                <!--<hr/>-->
                <!--<pre>{{WorkspaceBrowserService.workspace | json}}</pre>-->
                <!--<br>-->
                <!--<pre>{{presentationMetadata | json}}</pre>-->
            </div>

        </div>
    </div>
</div>

<div ng-include="'workspace/metadata-editor.html'" ng-controller="MetadataEditorCtrl"></div>
