<div class="aside-backdrop am-fade tool-list-backdrop" ng-show="isVisible()" ng-click="hide()"></div>
<div class="aside right am-fade-and-slide-right tool-results" ng-show="isVisible()" tabindex="-1" role="dialog" style="width:1000px" >
    <div class="aside-dialog">
        <div class="aside-content">
            <div class="tool-list-header">
                <button type="button" class="close" ng-click="hide()">&times;</button>
                <h4 class="aside-title" ng-bind="jname"></h4>
            </div>

            <div class="aside-body" style="width:1000px">
                <div>
                    <!-- Nav tabs -->
                    <ul class="nav nav-pills nav-stacked col-md-3">
                        <li ng-repeat="tab in results" class="{{tab.active===true ? 'active' : ''}}">
                            <a aria-expanded="false" href="#{{tab.key}}" target="_blank" data-toggle="tab" ng-if="tab.type==='text-preview'"><i class="fa fa-eye"></i> {{'TOOLS.PREVIEW_TITLE' | translate}}</a>
                            <a aria-expanded="false" href="#{{tab.key}}" target="_blank" data-toggle="tab" ng-if="tab.type==='link-list'"><i class="fa fa-download"></i> {{'TOOLS.LINK_LIST_TITLE' | translate}}</a>
                            <a aria-expanded="false" href="#{{tab.key}}" target="_blank" data-toggle="tab" ng-if="tab.type!='text-preview' && tab.type!='link-list'">{{tab.label}}</a>
                        </li>
                        <li><a aria-expanded="false" href="#log" target="_blank" data-toggle="tab"><i class="fa fa-file-text-o"></i> {{'TOOLS.LOG_TITLE' | translate}}</a></li>
                        <li ng-click="loadConfig(process.processTool, process.job.parameters)"><a aria-expanded="false" href="#param" target="_blank" data-toggle="tab"><i class="fa fa-gear"></i> {{'TOOLS.PARAMETERS' | translate}}</a></li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content col-md-9">
                        <div ng-repeat="pane in results" class="tab-pane fade {{results.length>0 && pane.active===true ? 'active in' : ''}}" id="{{pane.key}}">
                            <br>
                            <blockquote>
                                <p>{{ 'TOOLS.DESCRIPTION.' + pane.type.toUpperCase().replace('-', '_')  | translate}}</p>
                            </blockquote>
                            <hr/>
                            <div onload="result = pane;" ng-include="'common/tools/tool-tpl-'+ pane.type +'.html'"></div>
                        </div>
                        <div class="tab-pane fade {{results.length===0 ? 'active in' : ''}}" id="log">  <!--TODO : bug avec les panel actifs-->
                            <br>
                            <blockquote>
                                <p>{{ 'TOOLS.DESCRIPTION.LOG'  | translate}}</p>
                            </blockquote>
                            <hr/>
                            <pre ng-style="{'max-height': maxProcessLogHeight}">{{log}}</pre>
                        </div>
                        <div class="tab-pane fade" id="param">
                            <br>
                            <blockquote>
                                <p>{{ 'TOOLS.DESCRIPTION.PARAMETERS'  | translate}}</p>
                            </blockquote>
                            <hr/>
                            <!--<div class="list-group">-->
                                <!--&lt;!&ndash; Links to detail level &ndash;&gt;-->
                                <!--<dl class="dl-horizontal list-group-item" ng-repeat="(param, value) in process.job.parameters" >-->
                                    <!--<dt>{{param}} : </dt>-->
                                    <!--<dd>{{value}}</dd>-->
                                <!--</dl>-->
                            <!--</div>-->

                            <div ng-show="config.loadingData.$$status.state === 0" style="margin:20px 0;font-size:2em">
                                <strong>Loading...</strong>
                            </div>
                            <div ng-show="config.loadingData.$$status.state !== 0">
                                <form ng-submit="onSubmit()" novalidate>
                                    <formly-form model="config.model" fields="config.formFields" options="config.options">
                                        <button type="submit" class="btn btn-primary submit-button" ng-disabled="config.form.$invalid">Submit</button>
                                    </formly-form>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
